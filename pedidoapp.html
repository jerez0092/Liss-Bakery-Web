<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formulario de Pedido de Pasteles - Liss's Bakery</title>
</head>

<style>
    body {
        background: linear-gradient(to right, #ADD8E6, #FFC0CB, #9370DB);
        font-family: 'Roboto', sans-serif;
        color: #333;
        margin: 10px;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
</style>

<body>

<h1>Registro de Pedidos de Liss Bakery!</h1>

<form id="cakeForm" action="/submit-order" method="post" name="cakeForm" data-netlify="true">

  <label for="currentDate">Fecha de registro:</label> 
  <input type="text" id="currentDate" name="currentDate" readonly>
  <p></p>
  <label for="date">Selecciona la fecha de la entrega:</label>
  <input type="date" id="date" name="date">
  <p></p>
  <label for="telefono">Numero de contacto:</label>
  <input type="text" id="telefono" name="telefono" placeholder="Escribe el numero de contacto:">
  <p></p>
  <label for="lugar">Sucursal donde desea Realizar el Pedido:</label>
  <select id="lugar" name="lugar">
    <option value="No seleccionado">Seleeciona una tienda</option>
    <option value="Quezaltepeque">Quezaltepeque</option>
    <option value="Nejapa/Cedral">Nejapa/Cedral</option>
  </select>
  <p></p>
  <label for="cakeType">Elige el tipo de pastel:</label>
  <select id="cakeType" name="cakeType">
    <option value="">Selecciona el tipo de pastel</option>
    <option value="traditional">Tradicional</option>
    <option value="customized">Personalizado</option>
  </select>

  <!-- Opciones para pastel tradicional -->
  <div id="traditionalOptions" style="display:none;">
    <h3>Opciones para Pastel Tradicional</h3>
    <label for="nombreTraditional">Nombre del cliente:</label>
    <input type="text" id="nombreTraditional" name="nombreTraditional" placeholder="Nombre del cliente">
    <p></p>
    <p><strong>Relleno:</strong> Crema pastelera</p>
    <p><strong>Remojo:</strong> Tradicional de canela</p>
    <p><strong>Sabor de Torta:</strong> Vainilla</p>
    <label for="dedicationTraditional">Dedicatoria:</label>
    <input type="text" id="dedicationTraditional" name="dedicationTraditional" placeholder="Escribe una dedicatoria">
    <p></p>
    <label for="extraTraditional">Desea que el pastel tenga un color especifico:</label>
    <input type="text" id="extraTraditional" name="extraTraditional" placeholder="Color del pastel">
    <p></p>
    <label for="style">Solo el decorado o todo el pastel:</label>
    <select id="style" name="style">
      <option value="No seleccionada">Selecciona una opcion</option>
      <option value="borde">Decorado</option>
      <option value="completo">Completo</option>
    </select>
    <p></p>
    <label for="cobertura">En el borde:</label>
    <select id="cobertura" name="cobertura">
      <option value="No seleccionado">Selecciona como quieres el borde</option>
      <option value="liso">Liso</option>
      <option value="caramelo"> con Caramelo</option>
      <option value="chocolate"> con chocolate</option>
      <option value="dulce">con Dulce</option>
      <option value="galleta">con Galleta</option>
    </select>
    <p></p>
    <label for="traditionalPrice">Selecciona el precio:</label>
    <select id="traditionalPrice" name="traditionalPrice">
      <option value="No seleccionado">Seleccione un precio (pastel Redondo)</option>
      <option value="5 --- 1 a 3 porciones">1 a 3 porciones - $5.00</option>
      <option value="8 --- 4 a 6 porciones">4 a 6 porciones - $8.00</option>
      <option value="11 --- 8 a 10 porciones">8 a 10 porciones - $11.00</option>
      <option value="15 --- 12 a 15 porciones">12 a 15 porciones - $15.00</option>
      <option value="20 --- 20 a 25 porciones">20 a 25 porciones - $20.00</option>
      <option value="27.50 --- 30 a 35 porciones">30 a 35 porciones - $27.50</option>
      <option value="32 --- 40 a 50 porciones">40 a 50 porciones - $32.00</option>
      <option value="40 --- 50 a 60 porciones">50 a 60 porciones - $40.00</option>
      <option value="50 --- 70 a 80 porciones">70 a 80 porciones - $50.00</option>
      <option value="60 --- 85 a 90 porciones">85 a 90 porciones - $60.00</option>
      <option value="No seleccionado">Seleccione un precio (pastel Cuadrado)</option>
      <option value="18 --- 14 a 16 porciones">14 a 16 porciones - $18.00</option>
      <option value="25 --- 20 a 30 porciones">20 a 30 porciones - $25.00</option>
      <option value="30--- 30 a 40 porciones">30 a 40 porciones - $30.00</option>
      <option value="40 --- 50 a 60 porciones">50 a 60 porciones - $40.00</option>
      <option value="50 --- 75 a 80 porciones">75 a 80 porciones - $50.00</option>
      <option value="65 --- 90 a 100 porciones">90 a 100 porciones - $65.00</option>
    </select>
  </div>

  <!-- Opciones para pastel personalizado -->
  <div id="customOptions" style="display:none;">
    <h3>Opciones para Pastel Personalizado</h3>
    <label for="nombreCustom">Nombre del cliente:</label>
    <input type="text" id="nombreCustom" name="nombreCustom" placeholder="Nombre del cliente:">
    <p></p>
    <label for="filling"><p></p>Elige el relleno:</label>
    <select id="filling" name="filling">
      <option value="No seleccionada">Selecciona sabor de relleno</option>
      <option value="crema_pastelera">Crema pastelera</option>
      <option value="caramelo">Caramelo</option>
      <option value="chocolate">Chocolate</option>
      <option value="crema_fresa">Crema de fresa</option>
      <option value="crema_fresa_gomitas">Crema de fresa (con gomitas o marshmallow)</option>
      <option value="crema_chocolate_gomitas">Crema de chocolate (con gomitas o marshmallow)</option>
      <option value="crema_batida_caramelo">Crema batida con caramelo</option>
      <option value="crema_cafe_mani">Crema de café (con maní o chispas de chocolate)</option>
    </select>

    <label for="soak"><p></p>Elige el remojo:</label>
    <select id="soak" name="soak">
      <option value="No seleccionada">Selecciona sabor de remojo</option>
      <option value="remojo_tradicional">tradicional de canela</option>
      <option value="tres_leches">Tres leches (Costo extra según tamaño de pastel)</option>
      <option value="cafe">Café</option>
    </select>

    <label for="flavor"><p></p>Elige el sabor de la torta:</label>
    <select id="flavor" name="flavor">
      <option value="No seleccionado">Selecciona sabor de torta</option>
      <option value="No seleccionada">Selecciona sabor de torta</option>
      <option value="vainilla">Vainilla</option>
      <option value="chocolate">Chocolate</option>
      <option value="marmoleado">Marmoleado</option>
    </select>
    <p></p>
    <label for="dedicationCustom">Dedicatoria:</label>
    <input type="text" id="dedicationCustom" name="dedicationCustom" placeholder="Escribe una dedicatoria">
    <p></p>
    <label for="customPrice"><p></p>Selecciona el precio:</label>
    <select id="customPrice" name="customPrice">
      <option value="No seleccionado">Seleccione un precio (pastel Redondo)</option>
      <option value="6.50 --- 1 a 3 porciones">1 a 3 porciones - $6.50</option>
      <option value="12 --- 4 a 6 porciones">4 a 6 porciones - $12.00</option>
      <option value="16.50 --- 8 a 10 porciones">8 a 10 porciones - $16.50</option>
      <option value="22 --- 12 a 15 porciones">12 a 15 porciones - $22.00</option>
      <option value="30 --- 20 a 15 porciones">20 a 25 porciones - $30.00</option>
      <option value="37 --- 30 a 35 porciones">30 a 35 porciones - $37.00</option>
      <option value="42 --- 40 a 50 porciones">40 a 50 porciones - $42.00</option>
      <option value="48 --- 50 a 60 porciones">50 a 60 porciones - $48.00</option>
      <option value="60 --- 70 a 60 porciones">70 a 80 porciones - $60.00</option>
      <option value="70 --- 85 a 90 porciones">85 a 90 porciones - $70.00</option>
      <option value="No seleccionado">Seleccione un precio (pastel Cuadrado)</option>
      <option value="25 --- 14 a 16 porciones">14 a 16 porciones - $25.00</option>
      <option value="35 --- 20 a 30 porciones">20 a 30 porciones - $35.00</option>
      <option value="40 --- 30 a 40 porciones">30 a 40 porciones - $40.00</option>
      <option value="48 --- 50 a 60 porciones">50 a 60 porciones - $48.00</option>
      <option value="60 --- 75 a 80 porciones">75 a 80 porciones - $60.00</option>
      <option value="75 --- 90 a 100 porciones">90 a 100 porciones - $75.00</option>
    </select>
  </div>
  
  <div><p></p></div>

  <label for="quest">Observación:</label>
  <input type="text" id="quest" name="quest" placeholder="si es necesario">
  <p></p>

  <div><p></p></div>

  <div>
    <p>
      Una vez que completes tu registro, presiona "Capturar Imagen" para generar el archivo (generalmente se guardará en la carpeta de descargas).
      <br>Después de que se complete la descarga, presiona "Agendar Pedido" para comunicarte con un vendedor. Por favor, proporciona la imagen o el archivo descargado para confirmar tu pedido.
      <br>Este proceso ayudará a mantener un registro claro de tu pedido, el cual será válido si el vendedor lo valida.
      <br>Si necesitas información adicional, házselo saber al vendedor.
    </p>
  </div>
  
  <!-- Botón para capturar imagen -->
  <div id="captureImage" style="display:none;">
    <button type="submit" onclick="generateImage()">Capturar Imagen</button>
  </div>

  <div><p></p></div>

  <!-- Botón de envío -->
  <button type="button" onclick="location.href='//wa.me/+50363149600';">Agendar Pedido</button>

</form>

<script type="text/javascript">
document.addEventListener('DOMContentLoaded', (event) => {
    var currentDate = new Date().toISOString().split('T')[0];
    document.getElementById('currentDate').value = currentDate;
});

// JavaScript para mostrar/ocultar opciones según el tipo de pastel seleccionado
document.getElementById('cakeType').addEventListener('change', function() {
   var cakeType = this.value;
   document.getElementById('traditionalOptions').style.display = cakeType == 'traditional' ? 'block' : 'none';
   document.getElementById('customOptions').style.display = cakeType == 'customized' ? 'block' : 'none';
   document.getElementById('captureImage').style.display = cakeType ? 'block' : 'none';
});

// Función para generar imagen con la información seleccionada
function generateImage() {
   var canvas = document.createElement('canvas');
   canvas.width = 800;
   canvas.height = 900;
   var ctx = canvas.getContext('2d');
   ctx.fillStyle = 'white'; 
   ctx.fillRect(0, 0, canvas.width, canvas.height);
   var form = document.getElementById('cakeForm');
   var data = new FormData(form);
   var text = 'Liss Bakery\nRegistro de pedido:\n\n';

   var currentDate = data.get('currentDate'); 
   text += 'Fecha de Registro: ' + currentDate + '\n\n';

   var lugar = data.get('lugar');
   text += 'Sucursal ' + lugar + '\n';

   var cakeType = data.get('cakeType');
   text += 'Tipo de Pastel: ' + (cakeType === 'traditional' ? 'Tradicional' : 'Personalizado') + '\n\n';

   var nombre = cakeType === 'traditional' ? data.get('nombreTraditional') : data.get('nombreCustom');
   text += 'Nombre del Cliente: ' + nombre + '\n\n';

   var dedication = cakeType === 'traditional' ? data.get('dedicationTraditional') : data.get('dedicationCustom');
   text += 'Dedicatoria: ' + dedication + '\n\n';

   var date = cakeType === 'traditional' ? data.get('date'): data.get('date');
   text += 'Fecha de la entrega: ' + date + '\n\n';

   if (cakeType === 'traditional') {
       var extra = data.get('extraTraditional');
       text += 'Color de Pastel: ' + extra + '\n';

       var style = data.get('style');
       text += 'El color se aplicará:' + (style === 'borde' ? ' en el Decorado' : ' Completo') + '\n';

       var cobertura = data.get('cobertura');
       text += 'En el Borde: ' + cobertura + '\n';

       text += 'Relleno: Crema pastelera\n';
       text += 'Remojo: Tradicional de canela\n';
       text += 'Sabor de Torta: Vainilla\n\n';
       text += 'Precio: $' + data.get('traditionalPrice') + '\n\n\n';
   } else if (cakeType === 'customized') {
       text += 'Relleno: ' + data.get('filling') + '\n';
       text += 'Remojo: ' + data.get('soak') + '\n';
       text += 'Sabor de Torta: ' + data.get('flavor') + '\n\n';
       text += 'Precio: $' + data.get('customPrice') + '\n\n';
   }

   var contacto = data.get('telefono');
   text += "Numero de contacto: " + contacto + '\n\n';

   var quest = data.get('quest');
   text += "Detalles: " + quest + '\n\n';

   var lines = text.split('\n');
   ctx.font = '25px Arial';
   ctx.fillStyle = 'black';
   for (var i = 0; i < lines.length; i++) {
       ctx.fillText(lines[i], 20, 70 + (i * 30));
   }

   var img = canvas.toDataURL('image/png');
   var link = document.createElement('a');
   link.href = img;
   link.download = nombre + '-' + date + '.png';
   link.click();
}

function redirectToThankYouPage(event) { 
    event.preventDefault(); 
    window.location.href = "https://wa.me/+50363149600";
}
</script>


</body>
</html>
