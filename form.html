<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Pedido de Pastel - Liss's Bakery</title>
    <style>
        body {
            background: linear-gradient(to right, #ADD8E6, #FFC0CB, #9370DB);
            font-family: 'Roboto', sans-serif;
            color: #333;
            margin: 10px;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>

<h1>Registro de Pedidos de Liss Bakery!</h1>

<form name="pedido" method="POST" data-netlify="true">
    <label for="fecha-registro">Fecha de Registro:</label> 
    <input type="date" id="fecha-registro" name="fecha-registro" required><br><br>

    <label for="sucursal">Sucursal:</label>
    <input type="text" id="sucursal" name="sucursal" required><br><br>

    <label for="tipo-pastel">Tipo de Pastel:</label>
    <input type="text" id="tipo-pastel" name="tipo-pastel" required><br><br>

    <label for="nombre-cliente">Nombre del Cliente:</label>
    <input type="text" id="nombre-cliente" name="nombre-cliente" required><br><br>

    <label for="dedicatoria">Dedicatoria:</label>
    <input type="text" id="dedicatoria" name="dedicatoria" required><br><br>

    <label for="fecha-entrega">Fecha de la entrega:</label>
    <input type="date" id="fecha-entrega" name="fecha-entrega" required><br><br>

    <label for="color-pastel">Color de Pastel:</label>
    <input type="text" id="color-pastel" name="color-pastel" required><br><br>

    <label for="color-aplicacion">El color se aplicará:</label>
    <input type="text" id="color-aplicacion" name="color-aplicacion" required><br><br>

    <label for="borde">En el Borde:</label>
    <input type="text" id="borde" name="borde" required><br><br>

    <label for="relleno">Relleno:</label>
    <input type="text" id="relleno" name="relleno" required><br><br>

    <label for="remojo">Remojo:</label>
    <input type="text" id="remojo" name="remojo" required><br><br>

    <label for="sabor-torta">Sabor de Torta:</label>
    <input type="text" id="sabor-torta" name="sabor-torta" required><br><br>

    <label for="precio">Precio:</label>
    <input type="text" id="precio" name="precio" required><br><br>

    <label for="contacto">Número de contacto:</label>
    <input type="text" id="contacto" name="contacto" required><br><br>

    <label for="detalles">Detalles:</label>
    <input type="text" id="detalles" name="detalles"><br><br>

    <label for="fileInput">Subir imagen:</label>
    <input type="file" id="fileInput" accept="image/*"><br><br>

    <button type="submit">Enviar Pedido</button>
</form>

<script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.1/dist/tesseract.min.js"></script>
<script>
    document.getElementById('fileInput').addEventListener('change', (event) => {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = () => {
                const image = new Image();
                image.src = reader.result;
                image.onload = () => {
                    Tesseract.recognize(
                        image,
                        'spa', // Elige el idioma adecuado
                        {
                            logger: (m) => console.log(m),
                        }
                    ).then(({ data: { text } }) => {
                        // Aquí puedes usar el texto extraído para autocompletar el formulario
                        console.log(text);
                        // Ejemplo de cómo podrías usar el texto extraído (adaptar a tus necesidades):
                        document.getElementById('nombre-cliente').value = extractNameFromText(text);
                        document.getElementById('fecha-entrega').value = extractDateFromText(text);
                        // Agrega más lógica para autocompletar otros campos
                    });
                };
            };
            reader.readAsDataURL(file);
        }
    });

    function extractNameFromText(text) {
        // Lógica personalizada para extraer el nombre del texto
        return text.match(/nombre:\s*(\w+)/i)[1] || '';
    }

    function extractDateFromText(text) {
        // Lógica personalizada para extraer la fecha del texto
        const match = text.match(/\d{4}-\d{2}-\d{2}/);
        return match ? match[0] : '';
    }
</script>

</body>
</html>
